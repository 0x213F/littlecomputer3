function reg_st(a,b){switch(a){case"000":r0=b;break;case"001":r1=b;break;case"010":r2=b;break;case"011":r3=b;break;case"100":r4=b;break;case"101":r5=b;break;case"110":r6=b;break;case"111":r7=b;break;default:update("error")}}function reg_ld(a){switch(a){case"000":return r0;case"001":return r1;case"010":return r2;case"011":return r3;case"100":return r4;case"101":return r5;case"110":return r6;case"111":return r7;default:update("error")}}function binary_to_decimal(a){var b=0,c=a.length,d=0;if("0"!=a.charAt(0)){var b=0,c=a.length,d=0;for(x=0;x<c-1;x++)"1"==a.charAt(c-x-1)&&(b+=1*Math.pow(2,d)),d++;return"1"==a.charAt(0)&&(b-=Math.pow(2,c-1)),b}for(x=0;x<c;x++)"1"==a.charAt(c-x-1)&&(b+=1*Math.pow(2,d)),d++;return b}function decimal_to_binary(a){NaN!=a&&(a=a.toString());var b="0000000000000000",c=15;if(a>=0)for(x=0;x<16;x++)a-Math.pow(2,c)>=0&&(b=b.replaceAt(x,"1"),a-=Math.pow(2,c)),c--;else{var d=-65536;for(c=15,b=b.replaceAt(0,"1"),x=0;x<16;x++)d+Math.pow(2,c)<=a&&(b=b.replaceAt(x,"1"),d+=Math.pow(2,c)),c--}return b}function hex_to_binary(a){var b=(a.length,new String);for(i=0;i<a.length;i++)if("x"!=a[i]&&"X"!=a[i])switch(a[i]){case"0":b+="0000";break;case"1":b+="0001";break;case"2":b+="0010";break;case"3":b+="0011";break;case"4":b+="0100";break;case"5":b+="0101";break;case"6":b+="0110";break;case"7":b+="0111";break;case"8":b+="1000";break;case"9":b+="1001";break;case"a":b+="1010";break;case"A":b+="1010";break;case"b":b+="1011";break;case"B":b+="1011";break;case"c":b+="1100";break;case"C":b+="1100";break;case"d":b+="1101";break;case"D":b+="1101";break;case"e":b+="11110";break;case"E":b+="1110";break;case"f":b+="1111";break;case"F":b+="1111";break;case";":return b;default:update("error")}return b}function binary_to_hex(a){for(var b=[a.substr(0,4),a.substr(4,4),a.substr(8,4),a.substr(12,4)],c=0,d="";4>c;){switch(b[c]){case"0000":d+="0";break;case"0001":d+="1";break;case"0010":d+="2";break;case"0011":d+="3";break;case"0100":d+="4";break;case"0101":d+="5";break;case"0110":d+="6";break;case"0111":d+="7";break;case"1000":d+="8";break;case"1001":d+="9";break;case"1010":d+="A";break;case"1011":d+="B";break;case"1100":d+="C";break;case"1101":d+="D";break;case"1110":d+="E";break;case"1111":d+="F"}c++}return d}function adder(a,b){for(var c="0",d="0000000000000000",e=15;e>=0;)"0"==c?"1"==a.charAt(e)&&"1"==b.charAt(e)?(d=d.replaceAt(e,"0"),c="1"):"0"==a.charAt(e)&&"0"==b.charAt(e)?(d=d.replaceAt(e,"0"),c="0"):"0"==a.charAt(e)&&"1"==b.charAt(e)?(d=d.replaceAt(e,"1"),c="0"):"1"==a.charAt(e)&&"0"==b.charAt(e)&&(d=d.replaceAt(e,"1"),c="0"):"1"==a.charAt(e)&&"1"==b.charAt(e)?(d=d.replaceAt(e,"1"),c="1"):"0"==a.charAt(e)&&"0"==b.charAt(e)?(d=d.replaceAt(e,"1"),c="0"):"0"==a.charAt(e)&&"1"==b.charAt(e)?(d=d.replaceAt(e,"0"),c="1"):"1"==a.charAt(e)&&"0"==b.charAt(e)&&(d=d.replaceAt(e,"0"),c="1"),e--;return d}function twos(a){for(x=0;x<16;x++)a="0"==a.charAt(x)?a.replaceAt(x,"1"):a.replaceAt(x,"0");return a=adder(a,"0000000000000001")}function sext(a){var b;for(b="1"==a.charAt(0)?"1111111111111111":"0000000000000000",x=0;x<a.length;x++)b=b.replaceAt(15-x,a.charAt(a.length-x-1));return b}function binary_to_assembly_2(a){var b=a.substr(0,4);switch(b){case"0001":return"ADD";case"0101":return"AND";case"1001":return"NOT";case"0000":return"BR";case"1100":return"JMP";case"0100":return"JSR";case"1100":return"RET";case"0010":return"LD";case"1010":return"LDI";case"0110":return"LDR";case"1110":return"LEA";case"0011":return"ST";case"1011":return"STI";case"0111":return"STR";case"1111":return"TRAP";case"1000":return"RTI";default:return"~"}}function is_assembly(){for(var a=editor.getValue(),b=a.split("\n"),c=0;c<b.length;c++){a=b[c].trim();var d=a.split(/\s/g);if(d=clean_array(d),d[0]!=undefined&&";"!=d[0].charAt(0))return"."==d[0].charAt(0)?!0:!1}}function pass_one(){$("#dump_loc").prop("disabled",!1);for(var a,b=!1,c=editor.getValue(),d=c.split("\n"),e=0;e<d.length;e++){c=d[e].trim();var f=c.split(/\s/g);if(f=clean_array(f),f[1]==undefined||".STRINGZ"!=f[1]){if(0==b){if(valid_opcode(f[0])){a=hex_to_binary(f[1]),b=!0;continue}if(valid_comment(f[0]))continue;return void update("error")}if(!valid_comment(f[0]))if(valid_label(f[0])){var g=get_label(f[0]).toUpperCase();if(labels[g]=a,valid_opcode(f[1]))if(".STRINGZ"==f[1])for(var h='"'==f[2].charAt(0),i=0;i<f[2].length&&!('"'==f[2].charAt(i)&&h||"'"==f[2].charAt(i)&&!h);i++)"\\"==f[2].charAt(i)&&i++,a=adder(a,"0000000000000001");else if(".BLKW"==f[1])if("#"==f[2].charAt(0))for(var i=0;i<binary_to_decimal(decimal_to_binary(f[2]));i++)a=adder(a,"0000000000000001");else for(var i=0;i<binary_to_decimal(hex_to_binary(f[2]));i++)a=adder(a,"0000000000000001");else a=adder(a,"0000000000000001")}else valid_opcode(f[0])&&(a=adder(a,"0000000000000001"))}else{if(valid_label(f[0])){var g=get_label(f[0]).toUpperCase();labels[g]=a}var j,i=0,k=1;for(i;i<d[e].length;i++)if(" "!=d[e].charAt(i)&&"	"!=d[e].charAt(i)||1!=k)if(" "==d[e].charAt(i)||"	"==d[e].charAt(i)||2!=k)if("'"!=d[e].charAt(i)&&'"'!=d[e].charAt(i)||3!=k){if(4!=k)continue;if(d[e].charAt(i)==j)break;"\\"==d[e].charAt(i)&&i++,a=adder(a,"0000000000000001")}else{var j=d[e].charAt(i);k=4}else k=3;else k=2;f[2]=d[e].substr(i,d[e].length),a=adder(a,"0000000000000001")}}console.log("pass one done"),pass_two()}function pass_two(){var a,b=!1,c=editor.getValue(),d=c.split("\n");for(i in d){c=d[i].trim();var e=c.split(/\s/g);if(e=clean_array(e),e[1]==undefined||".STRINGZ"!=e[1])if(0==b){if(valid_comment(e[0]))continue;if(valid_label(e[0]))return void update("error");if(valid_opcode(e[0])){a=hex_to_binary(e[1]),dump_location=a,orig_dump_location=dump_location,pc=adder(a,"1111111111111111"),b=!0;continue}update("error")}else{if(valid_comment(e[0]))continue;if(valid_label(e[0])){if(valid_opcode(e[1])){if(".STRINGZ"==e[1])continue;if(".BLKW"==e[1])if("#"==e[2].charAt(0))for(var f=0;f<binary_to_decimal(decimal_to_binary(e[2]));f++)storage[a]="0000000000000000",a=adder(a,"0000000000000001");else for(var f=0;f<binary_to_decimal(hex_to_binary(e[2]));f++)storage[a]="0000000000000000",a=adder(a,"0000000000000001");else opcode_parse(e[1],e[2],e[3],e[4],e[5],a),a=adder(a,"0000000000000001")}continue}if(valid_opcode(e[0])){opcode_parse(e[0],e[1],e[2],e[3],e[4],a),a=adder(a,"0000000000000001");continue}}else{if(valid_label(e[0])){var g=get_label(e[0]).toUpperCase();labels[g]=a}var h,f=0,j=1;for(f;f<d[i].length;f++)if(" "!=d[i].charAt(f)&&"	"!=d[i].charAt(f)||1!=j)if(" "==d[i].charAt(f)||"	"==d[i].charAt(f)||2!=j)if("'"!=d[i].charAt(f)&&'"'!=d[i].charAt(f)||3!=j){if(4!=j)continue;if(d[i].charAt(f)==h)break;"\\"==d[i].charAt(f)?(f++,"a"==d[i].charAt(f)?storage[a]="0000000000000111":"b"==d[i].charAt(f)?storage[a]="0000000000001000":"f"==d[i].charAt(f)?storage[a]="0000000000001100":"n"==d[i].charAt(f)?storage[a]="0000000000001010":"r"==d[i].charAt(f)?storage[a]="0000000000001101":"t"==d[i].charAt(f)?storage[a]="0000000000001001":"v"==d[i].charAt(f)?storage[a]="0000000000001011":"\\"==d[i].charAt(f)?storage[a]="0000000001011100":"''"==d[i].charAt(f)?storage[a]="0000000000100111":'"'==d[i].charAt(f)?storage[a]="0000000000100010":"?"==d[i].charAt(f)?storage[a]="0000000000111111":storage[a]=decimal_to_binary(d[i].charCodeAt(f))):storage[a]=decimal_to_binary(d[i].charCodeAt(f)),a=adder(a,"0000000000000001")}else{var h=d[i].charAt(f);j=4}else j=3;else j=2;e[2]=d[i].substr(f,d[i].length),storage[a]="0000000000000000",a=adder(a,"0000000000000001")}}is_on=!0,update("passedtwo"),console.log("pass two done"),"play"==program&&(console.log("running program"),exec())}function opcode_parse(a,b,c,d,e,f){var g=a.substr(0,2),h=a.substr(0,3),i=a.substr(0,4),j=a.substr(0,5),k=a;b!=undefined&&(k+=b),c!=undefined&&(k+=c),d!=undefined&&(k+=d),e!=undefined&&(k+=e);var l="0000000000000000";switch(g){case"BR":l=l.replaceAt(0,"0000"),(a.indexOf("N")>-1||a.indexOf("n")>-1)&&(l=l.replaceAt(4,"1")),(a.indexOf("Z")>-1||a.indexOf("z")>-1)&&(l=l.replaceAt(5,"1")),(a.indexOf("P")>-1||a.indexOf("p")>-1)&&(l=l.replaceAt(6,"1")),"BR"==a&&(l=l.replaceAt(4,"1"),l=l.replaceAt(5,"1"),l=l.replaceAt(6,"1"));var m=get_label(b),n=labels[m];n=adder(twos(f),n),n=adder(n,"1111111111111111"),l=l.replaceAt(7,n.substring(7,16));break;case"LD":if("LDR"==h)break;l=l.replaceAt(0,"0010"),l=l.replaceAt(4,reg_binary(k.substr(2,2)));var m=get_label(k.substr(5,k.length-4)).toUpperCase(),n=labels[m];n=adder(twos(f),n),l=l.replaceAt(7,n.substring(7,16));break;case"ST":if("STR"==h||"STI"==h)break;l=l.replaceAt(0,"0011"),l=l.replaceAt(4,reg_binary(k.substr(2,2)));var m=get_label(k.substr(5,k.length-4)).toUpperCase(),n=labels[m];n=adder(twos(f),n),l=l.replaceAt(7,n.substring(7,16));break;case"IN":l=l.replaceAt(0,"1111000000100011")}switch(h){case"ADD":if(l=l.replaceAt(0,"0001"),l=l.replaceAt(4,reg_binary(k.substr(3,2))),l=l.replaceAt(7,reg_binary(k.substr(6,2))),"x"==k.charAt(9)){l=l.replaceAt(10,"1");var o=hex_to_binary(k.substr(9,k.length-9));4==o.length&&(o="0"+temp),l=l.replaceAt(11,o.substr(o.length-5,5));break}if("#"==k.charAt(9)||"R"!=k.charAt(9)){l=l.replaceAt(10,"1");var o=decimal_to_binary(k.substr(9,k.length-9));l=l.replaceAt(11,o.substr(o.length-5,5));break}l=l.replaceAt(10,"000"),l=l.replaceAt(13,reg_binary(k.substr(9,2)));break;case"JSR":if("JSRR"==i)break;l=l.replaceAt(0,"01001");var m=get_label(b).toUpperCase(),n=labels[m];n=adder(twos(f),n),n=adder(n,"1111111111111111"),l=l.replaceAt(5,n.substring(5,16));break;case"AND":if(l=l.replaceAt(0,"0101"),l=l.replaceAt(4,reg_binary(k.substr(3,2))),l=l.replaceAt(7,reg_binary(k.substr(6,2))),"x"==k.charAt(9)){l=l.replaceAt(10,"1");var o=hex_to_binary(k.substr(9,k.length-9));4==o.length&&(o="0"+o),l=l.replaceAt(11,o.substr(o.length-5,5));break}if("#"==k.charAt(9)||"R"!=k.charAt(9)){l=l.replaceAt(10,"1");var o=decimal_to_binary(k.substr(9,k.length-9));l=l.replaceAt(11,o.substr(o.length-5,5));break}l=l.replaceAt(10,"000"),l=l.replaceAt(13,reg_binary(k.substr(9,2)));break;case"LDR":if(l=l.replaceAt(0,"0110"),l=l.replaceAt(4,reg_binary(k.substr(3,2))),l=l.replaceAt(7,reg_binary(k.substr(6,2))),"x"==k.charAt(9)){var o=hex_to_binary(k.substr(9,k.length-9));4==o.length&&(o="0"+temp),l=l.replaceAt(10,o.substr(o.length-6,6));break}var o=decimal_to_binary(k.substr(9,k.length-9));l=l.replaceAt(10,o.substr(o.length-6,6));break;case"STR":if(l=l.replaceAt(0,"0111"),l=l.replaceAt(4,reg_binary(k.substr(3,2))),l=l.replaceAt(7,reg_binary(k.substr(6,2))),"x"==k.charAt(9)){var o=hex_to_binary(k.substr(9,k.length-9));4==o.length&&(o="0"+temp),l=l.replaceAt(10,o.substr(o.length-6,6));break}var o=decimal_to_binary(k.substr(9,k.length-9));l=l.replaceAt(10,o.substr(o.length-6,6));break;case"RTI":l=l.replaceAt(0,"1000");break;case"NOT":l=l.replaceAt(0,"1001"),l=l.replaceAt(4,reg_binary(k.substr(3,2))),l=l.replaceAt(7,reg_binary(k.substr(6,2))),l=l.replaceAt(10,"111111");break;case"LDI":l=l.replaceAt(0,"1010"),l=l.replaceAt(4,reg_binary(k.substr(3,2)));var m=get_label(k.substr(6,k.length-6)),n=labels[m];n=adder(twos(f),n),l=l.replaceAt(7,n.substring(7,16));break;case"STI":l=l.replaceAt(0,"1011"),l=l.replaceAt(4,reg_binary(k.substr(3,2)));var m=get_label(k.substr(6,k.length-6)),n=labels[m];n=adder(twos(f),n),l=l.replaceAt(7,n.substring(7,16));break;case"JMP":l=l.replaceAt(0,"1100000000000000"),l=l.replaceAt(7,reg_binary(k.substr(3,2)));break;case"LEA":l=l.replaceAt(0,"1110"),l=l.replaceAt(4,reg_binary(k.substr(3,2)));var m=get_label(k.substr(6,k.length-6)),n=labels[m];n=adder(twos(f),n),l=l.replaceAt(7,n.substring(7,16));break;case"RET":l="1100000111000000";break;case"OUT":l="1111000000100001"}switch(i){case"TRAP":var o=b.substr(0,3);"x20"==o&&(l="1111000000100000"),"x21"==o&&(l="1111000000100001"),"x22"==o&&(l="1111000000100010"),"x23"==o&&(l="1111000000100011"),"x24"==o&&(l="1111000000100100"),"x25"==o&&(l="1111000000100101");break;case".END":return;case"HALT":l="1111000000101001";break;case"GETC":l="1111000000100000";break;case"PUTS":l="1111000000100010";break;case"JSRR":l=l.replaceAt(0,"0100000000000000"),l=l.replaceAt(7,reg_binary(k.substr(3,2)))}switch(j){case".ORIG":break;case".FILL":l=labels[b]!=undefined?labels[b]:sext("x"==b[0]?hex_to_binary(b):decimal_to_binary(b));break;case".BLKW":break;case"PUTSP":l="1111000000100100"}storage[f]=l}function test_func(){for(i in storage)code[i]=binary_to_assembly(storage[i],i)}function binary_to_assembly(a,b){var c=a.substr(0,4),d="";switch(c){case"0001":d+="ADD ",d+=binary_reg(a.substr(4,3))+", "+binary_reg(a.substr(7,3))+", ",d+="0"==a.charAt(10)?binary_reg(a.substr(13,3)):"#"+binary_to_decimal(a.substr(11,5));break;case"0101":d+="AND ",d+=binary_reg(a.substr(4,3))+", "+binary_reg(a.substr(7,3))+", ",d+="0"==a.charAt(10)?binary_reg(a.substr(13,3)):"#"+binary_to_decimal(a.substr(11,5));break;case"1001":d+="NOT ",d+=binary_reg(a.substr(4,3))+", "+binary_reg(a.substr(7,3))+", ";break;case"0000":d+="BR","1"==a.charAt(4)&&(d+="n"),"1"==a.charAt(5)&&(d+="z"),"1"==a.charAt(6)&&(d+="p"),console.log(adder(sext(a.substr(7,9)),b)),d+=" "+labels[adder(sext(a.substr(7,9)),b)];break;case"1100":if("R7"==binary_reg(a.substr(7,3))){d+="RET";break}d+="JMP ",d+=binary_reg(a.substr(7,3));break;case"0100":if("R7"==binary_reg(a.substr(7,3))){d+="RET";break}d+="JSR ","0"==a.charAt(4)&&(d+=binary_reg(a.substr(7,3)));break;case"1100":ret(inst);break;case"0010":ld(inst);break;case"1010":ldi(inst);break;case"0110":ldr(inst);break;case"1110":lea(inst);break;case"0011":return;case"1011":sti(inst);break;case"0111":str(inst);break;case"1111":return;case"1000":rti(inst)}d+=";",console.log(d)}function test_func_13(){var a=window.event.keyCode;console.log(a)}function update(a){if(dump_location!=undefined){var b=$(".active").html();switch(b){case"hex":dump_hex();break;case"ascii":dump_ascii();break;case"decimal":dump_decimal();break;case"binary":dump_binary();break;case"assembly":dump_assembly()}}if(dump_location==undefined){document.getElementById("dump_loc").value="";var c;for(c=0;32>c;c++)document.getElementById("d"+c).innerHTML="&#9900"}else document.getElementById("dump_loc").value=binary_to_hex(dump_location);$("#r0").find(".reg_binary").html(r0),$("#r1").find(".reg_binary").html(r1),$("#r2").find(".reg_binary").html(r2),$("#r3").find(".reg_binary").html(r3),$("#r4").find(".reg_binary").html(r4),$("#r5").find(".reg_binary").html(r5),$("#r6").find(".reg_binary").html(r6),$("#r7").find(".reg_binary").html(r7),$("#pc").find(".reg_binary").html(pc),$("#ir").find(".reg_binary").html(ir_ui),$("#r0").find(".reg_hex").html("0x"+binary_to_hex(r0)),$("#r1").find(".reg_hex").html("0x"+binary_to_hex(r1)),$("#r2").find(".reg_hex").html("0x"+binary_to_hex(r2)),$("#r3").find(".reg_hex").html("0x"+binary_to_hex(r3)),$("#r4").find(".reg_hex").html("0x"+binary_to_hex(r4)),$("#r5").find(".reg_hex").html("0x"+binary_to_hex(r5)),$("#r6").find(".reg_hex").html("0x"+binary_to_hex(r6)),$("#r7").find(".reg_hex").html("0x"+binary_to_hex(r7)),$("#pc").find(".reg_hex").html("0x"+binary_to_hex(pc)),$("#ir").find(".reg_hex").html("0x"+binary_to_hex(ir_ui)),$("#r0").find(".reg_decimal").html("#"+binary_to_decimal(r0)),$("#r1").find(".reg_decimal").html("#"+binary_to_decimal(r1)),$("#r2").find(".reg_decimal").html("#"+binary_to_decimal(r2)),$("#r3").find(".reg_decimal").html("#"+binary_to_decimal(r3)),$("#r4").find(".reg_decimal").html("#"+binary_to_decimal(r4)),$("#r5").find(".reg_decimal").html("#"+binary_to_decimal(r5)),$("#r6").find(".reg_decimal").html("#"+binary_to_decimal(r6)),$("#r7").find(".reg_decimal").html("#"+binary_to_decimal(r7)),$("#pc").find(".reg_decimal").html("#"+binary_to_decimal(pc)),$("#ir").find(".reg_decimal").html("#"+binary_to_decimal(ir_ui))}function dump_hex(){dump_type="#hex",$(".dump_table").css("font-size","12px");var a,b=dump_location;for(a=0;32>a;a++)storage[b]==undefined?document.getElementById("d"+a).innerHTML="&#9900":document.getElementById("d"+a).innerHTML=binary_to_hex(storage[b]),b=adder(b,"0000000000000001")}function dump_ascii(){$(".dump_table").css("font-size","12px"),dump_type="#ascii";var a,b=dump_location;for(a=0;32>a;a++)storage[b]==undefined?document.getElementById("d"+a).innerHTML="&#9900":document.getElementById("d"+a).innerHTML=String.fromCharCode(binary_to_decimal(storage[b])),b=adder(b,"0000000000000001")}function dump_decimal(){dump_type="#decimal",$(".dump_table").css("font-size","12px");var a,b=dump_location;for(a=0;32>a;a++)storage[b]==undefined?document.getElementById("d"+a).innerHTML="&#9900":document.getElementById("d"+a).innerHTML=binary_to_decimal(storage[b]),b=adder(b,"0000000000000001")}function dump_binary(){dump_type="#binary";var a,b=dump_location;for(a=0;32>a;a++)storage[b]==undefined?document.getElementById("d"+a).innerHTML="&#9900":document.getElementById("d"+a).innerHTML=storage[b],b=adder(b,"0000000000000001")}function dump_assembly(){dump_type="#assembly",$(".dump_table").css("font-size","12px");var a,b=dump_location;for(a=0;32>a;a++)storage[b]==undefined?document.getElementById("d"+a).innerHTML="&#9900":document.getElementById("d"+a).innerHTML=binary_to_assembly_2(storage[b]),b=adder(b,"0000000000000001")}function dump_right(){if(dump_location!=undefined){document.getElementById("dump_loc").value=binary_to_hex(adder(hex_to_binary(document.getElementById("dump_loc").value),"0000000000100000")),dump_location=hex_to_binary(document.getElementById("dump_loc").value);var a=$(".active").html();switch(a){case"hex":dump_hex();break;case"ascii":dump_ascii();break;case"decimal":dump_decimal();break;case"binary":dump_binary();break;case"assembly":dump_assembly()}}}function dump_left(){if(dump_location!=undefined){document.getElementById("dump_loc").value=binary_to_hex(adder(hex_to_binary(document.getElementById("dump_loc").value),"1111111111100000")),dump_location=hex_to_binary(document.getElementById("dump_loc").value);var a=$(".active").html();switch(a){case"hex":dump_hex();break;case"ascii":dump_ascii();break;case"decimal":dump_decimal();break;case"binary":dump_binary();break;case"assembly":dump_assembly()}}}function exec(){if(program!=undefined){if(ir=storage[adder(pc,"0000000000000001")],"1111000000101001"==ir)return $("#play").removeClass("fa-stop-circle"),$("#play").addClass("fa-play-circle"),document.getElementById("terminal").innerHTML+="<br>================<br>Halting the LC-3<br>================",program=undefined,void update();if(oops>1e5)return void update("error");if(1==polling)return void(oops=0);pc=adder(pc,"0000000000000001"),ir_ui=ir,subr(ir),oops++,oops%2e3==0?setTimeout(function(){exec()},1):exec()}}function step(){if(program!=undefined&&1!=polling){var a=storage[adder(pc,"0000000000000001")];"1111000000101001"!=a&&1e4>oops?(pc=adder(pc,"0000000000000001"),ir_ui=a,subr(a),a=storage[pc],update("step"),oops++):1e7>oops?(document.getElementById("terminal").innerHTML+="<br>================<br>Halting the LC-3<br>================",add_node(undefined,undefined,undefined,undefined,undefined,60,pc),program=undefined,update("halt")):update("error")}}function pulse_forward(){if(program!=undefined&&1!=polling)for(var a=0;10>a&&1!=polling;){var b=storage[adder(pc,"0000000000000001")];if(!("1111000000101001"!=b&&1e4>oops))return 1e7>oops?(document.getElementById("terminal").innerHTML+="<br>================<br>Halting the LC-3<br>================",add_node(undefined,undefined,undefined,undefined,undefined,60,pc),program=undefined,void update("halt")):void update("error");pc=adder(pc,"0000000000000001"),ir_ui=b,subr(b),b=storage[pc],update("step"),oops++,a++}}function show(){if(1==polling)return void setTimeout(function(){show()},150);var a=storage[adder(pc,"0000000000000001")];"1111000000111001"!=a&&1e4>oops?(pc=adder(pc,"0000000000000001"),ir_ui=a,subr(a),a=storage[pc],update("step"),oops++,setTimeout(function(){show()},150)):update(1e7>oops?"halt":"error")}function reset(){$("#dump_loc").prop("disabled",!0),dump_location=undefined,storage[1111111e9]="0000000000000000",storage[0x3f28cb076060a]="0000000000000000",storage[0x3f28cb0760664]="0000000000000000",storage[0x3f28cb076066e]="0000000000000000",storage[0x3f28cb0760664]="0000000000000000",storage[0x3f28cb71571c6]="1000000000000000",r0=r1=r2=r3=r4=r5=r6=r7="0000000000000000",oops=0,is_on=!1,document.getElementById("terminal").innerHTML="",update("reset")}function store(){for(var a,b=!1,c=editor.getValue(),d=c.split("\n"),e=0;e<d.length;e++){if(0==b){if(valid_binary(d[e])){a=trim_binary(d[e]),pc=adder(trim_binary(d[e]),"1111111111111111"),b=!0;continue}if(!valid_binary_comment(d[e]))return void update("error")}if(valid_binary(d[e]))storage[a]=trim_binary(d[e]),a=adder(a,"0000000000000001");else if(!valid_binary_comment(d[e]))return void update("error")}update("stored"),exec()}function subr(a){var b=a.substr(0,4),c=adder(pc,"1111111111111111"),d=[undefined,undefined,undefined,undefined,undefined,undefined];switch(b){case"0001":d=add(a);break;case"0101":d=and(a);break;case"1001":d=not(a);break;case"0000":d=br(a);break;case"1100":d=jmp(a);break;case"0100":d=jsr(a);break;case"1100":d=ret(a);break;case"0010":d=ld(a);break;case"1010":d=ldi(a);break;case"0110":d=ldr(a);break;case"1110":d=lea(a);break;case"0011":d=st(a);break;case"1011":d=sti(a);break;case"0111":d=str(a);break;case"1111":d=trap(a);break;case"1000":d=rti(a)}"step"==program&&add_node(d[0],d[1],d[2],d[3],d[4],d[5],c)}function valid_binary(a){if(a=a.replace(/\s/g,""),a.length<16)return!1;for(i=0;i<16;i++)if("0"!=a.charAt(i)&&"1"!=a.charAt(i))return!1;return 16!=a.length&&";"!=a.charAt(16)?!1:!0}function valid_binary_comment(a){return a=a.replace(/\s/g,""),0==a.length?!0:";"==a.charAt(0)?!0:!1}function trim_binary(a){a=a.replace(/\s/g,"");var b="0000000000000000";for(i=0;i<16;i++)"1"==a.charAt(i)&&(b=b.replaceAt(i,"1"));return b}function valid_opcode(a){if(a==undefined)return!1;if(a=a.toUpperCase(),"BR"==a||"ST"==a||"LD"==a||"IN"==a)return!0;if("ADD"==a||"JSR"==a||"AND"==a||"LDR"==a||"STR"==a||"RTI"==a||"NOT"==a||"LDI"==a||"STI"==a||"JMP"==a||"LEA"==a||"OUT"==a||"BRN"==a||"BRZ"==a||"BRP"==a||"RET"==a)return!0;if("TRAP"==a||".END"==a||"HALT"==a||"GETC"==a||"PUTS"==a||"BRNZ"==a||"BRNP"==a||"BRZP"==a||"JSRR"==a)return!0;if(".ORIG"==a||".FILL"==a||".BLKW"==a||"BRNZP"==a||"PUTSP"==a)return!0;if(".STRINGZ"==a)return!0;if(a.length<3)return!1;var b=a.substr(0,3);if("IN;"==b)return!0;if(a.length<4)return!1;var c=a.substr(0,4);if("OUT;"==c||"RET;"==c)return!0;if(a.length<5)return!1;var d=a.substr(0,5);return".END;"==d||"HALT;"==d||"GETC;"==d||"PUTS;"==d?!0:!1}function valid_comment(a){return a==undefined?!0:(a=a.replace(/\s/g,""),a=a.toUpperCase(),""==a.charAt(0)?!0:";"==a.charAt(0)?!0:!1)}function valid_label(a){return a==undefined?!1:(a=a.toUpperCase(),valid_opcode(a)?!1:";"==a.charAt(0)?!1:!0)}function reg_binary(a){switch(a=a.toUpperCase(),a=a.substr(0,2)){case"R0":return"000";case"R1":return"001";case"R2":return"010";case"R3":return"011";case"R4":return"100";case"R5":return"101";case"R6":return"110";case"R7":return"111";default:update("error")}}function binary_reg(a){switch(a){case"000":return"R0";case"001":return"R1";case"010":return"R2";case"011":return"R3";case"100":return"R4";case"101":return"R5";case"110":return"R6";case"111":return"R7";default:update("error")}}function get_label(a){return a.indexOf(";")>-1&&(a=a.substring(0,a.indexOf(";"))),a}function clean_array(a){var b=a.indexOf("");return-1==b?a:(a.splice(b,1),clean_array(a))}function binary_to_assembly(a){var b=a.substr(0,4);switch(b){case"0001":data=add(a);break;case"0101":data=and(a);break;case"1001":data=not(a);break;case"0000":data=br(a);break;case"1100":data=jmp(a);break;case"0100":data=jsr(a);break;case"1100":data=ret(a);break;case"0010":data=ld(a);break;case"1010":data=ldi(a);break;case"0110":data=ldr(a);break;case"1110":data=lea(a);break;case"0011":data=st(a);break;case"1011":data=sti(a);break;case"0111":data=str(a);break;case"1111":data=trap(a);break;case"1000":data=rti(a)}}function string_reg(a){switch(a){case"000":return"R0";case"001":return"R1";case"010":return"R2";case"011":return"R3";case"100":return"R4";case"101":return"R5";case"110":return"R6";case"111":return"R7";default:return"will never reach this"}}function Node(){this.memory=[undefined,undefined],this.register=[undefined,undefined],this.pc=undefined,this.cc=undefined,this["char"]=undefined,this.next=null}function go_back(){if(1!=polling&&null!=linked_list){if(linked_list.memory[0]!=undefined&&(storage[linked_list.memory[0]]=linked_list.memory[1]),linked_list.register[0]!=undefined&&reg_st(linked_list.register[0],linked_list.register[1]),linked_list["char"]!=undefined){var a=document.getElementById("terminal").innerHTML;document.getElementById("terminal").innerHTML=a.substr(0,a.length-linked_list["char"])}cc=cc,pc=linked_list.pc,linked_list=linked_list.next,update()}}function pulse_backward(a){1==polling||a>10||(go_back(),setTimeout(function(){pulse_backward(a+1)},20))}function add_node(a,b,c,d,e,f,g){var h=new Node;h.memory=[a,b],h.register=[c,d],h.cc=e,h["char"]=f,h.pc=g,h.next=linked_list,linked_list=h}function print_ll(){for(var a=linked_list;null!=a;)console.log(a.pc),a=a.next}function add(a){var b,c=a.charAt(10),d=a.substr(4,3),e=reg_ld(a.substr(7,3)),f=reg_ld(d),g=cc;cc=d,b="0"==c?reg_ld(a.substr(13,3)):decimal_to_binary(binary_to_decimal(a.substr(11,5)));for(var h="0",i="0000000000000000",j=15;j>=0;)"0"==h?"1"==e.charAt(j)&&"1"==b.charAt(j)?(i=i.replaceAt(j,"0"),h="1"):"0"==e.charAt(j)&&"0"==b.charAt(j)?(i=i.replaceAt(j,"0"),h="0"):"0"==e.charAt(j)&&"1"==b.charAt(j)?(i=i.replaceAt(j,"1"),h="0"):"1"==e.charAt(j)&&"0"==b.charAt(j)&&(i=i.replaceAt(j,"1"),h="0"):"1"==e.charAt(j)&&"1"==b.charAt(j)?(i=i.replaceAt(j,"1"),h="1"):"0"==e.charAt(j)&&"0"==b.charAt(j)?(i=i.replaceAt(j,"1"),h="0"):"0"==e.charAt(j)&&"1"==b.charAt(j)?(i=i.replaceAt(j,"0"),h="1"):"1"==e.charAt(j)&&"0"==b.charAt(j)&&(i=i.replaceAt(j,"0"),h="1"),j--;return reg_st(d,i),[undefined,undefined,d,f,g,undefined]}function and(a){var b=a.charAt(10),c=a.substr(4,3),d=a.substr(7,3),e=reg_ld(c),f=cc;if(cc=c,"0"==b){var g=a.substr(13,3),h=reg_ld(d),i=reg_ld(g),j="0000000000000000";for(x=0;x<h.length;x++)"1"==h.charAt(x)&&"1"==i.charAt(x)&&(j=j.replaceAt(x,"1"));reg_st(c,j)}else{var j="0000000000000000",k=a.substr(11,5),h=reg_ld(d);for(k=decimal_to_binary(binary_to_decimal(k)),x=15;x>=0;x--)"1"==h.charAt(x)&&"1"==k.charAt(x)&&(j=j.replaceAt(x,"1"));reg_st(c,j)}return[undefined,undefined,c,e,f,undefined]}function not(a){var b=a.substr(4,3),c=a.substr(7,3),d=reg_ld(b),e=cc;cc=b;var f=reg_ld(c);for(x=0;x<16;x++)f="0"==f.charAt(x)?f.replaceAt(x,"1"):f.replaceAt(x,"0");return reg_st(b,f),[undefined,undefined,b,d,e,undefined]}function br(a){var b=reg_ld(cc);if("1"==b.charAt(0)&&"1"==a.charAt(4))return a=a.substr(7,9),pc=adder(sext(a),pc),[undefined,undefined,undefined,undefined,!1,undefined];if("1"==a.charAt(5)||"1"==a.charAt(6)){var c=0;for(s=1;s<16;s++)"1"==b.charAt(s)&&c++;0==c&&"1"==a.charAt(5)&&"0"==b.charAt(0)?(a=a.substr(7,9),pc=adder(sext(a),pc)):c>0&&"1"==a.charAt(6)&&"0"==b.charAt(0)&&(a=a.substr(7,9),pc=adder(sext(a),pc))}return[undefined,undefined,undefined,undefined,undefined,undefined]}function st(a){var b=a.substr(4,3),c=a.substr(7,9),d=reg_ld(b),e=adder(pc,sext(c)),f=storage[e];return storage[e]=d,[e,f,undefined,undefined,undefined,undefined]}function ld(a){var b=a.substr(4,3),c=a.substr(7,9),d=reg_ld(b),e=cc;cc=b;var f=adder(pc,sext(c));if(storage[f]!=undefined){var g=storage[f];reg_st(b,g)}else update("error");return[undefined,undefined,b,d,e,undefined]}function str(a){var b=a.substr(4,3),c=a.substr(7,3),d=a.substr(10,6),e=reg_ld(b),f=reg_ld(c),g=adder(sext(f),sext(d)),h=storage[g];return storage[g]=e,[g,h,undefined,undefined,undefined,undefined]}function ldr(a){var b=a.substr(4,3),c=a.substr(7,3),d=a.substr(10,6),e=reg_ld(b),f=cc;cc=b;var g=reg_ld(c),h=adder(sext(g),sext(d));return storage[h]!=undefined&&reg_st(b,storage[h]),[undefined,undefined,b,e,f,undefined]}function jmp(a){var b=a.substr(7,3),c=adder(reg_ld(b),"1111111111111111");return r7=adder(pc,"0000000000000001"),pc=c,[undefined,undefined,undefined,undefined,undefined,undefined]}function jsr(a){if(console.log("JSR"),"1"==a.charAt(4)){var b=a.substr(5,11);r7=adder(pc,"0000000000000001"),pc=adder(pc,sext(b))}else{var c=a.substr(7,3),d=reg_ld(c);r7=adder(pc,"0000000000000001"),pc=d}return[undefined,undefined,undefined,undefined,undefined,undefined]}function ldi(a){var b=adder(pc,sext(a.substr(7,11))),c=a.substr(4,3),d=reg_ld(c),e=cc;return cc=c,reg_st(c,storage[storage[b]]),[undefined,undefined,c,d,e,undefined]}function sti(a){var b=adder(pc,sext(a.substr(7,11))),c=a.substr(4,3),d=storage[storage[b]];return storage[storage[b]]=sext(reg_ld(c)),[storage[b],d,undefined,undefined,undefined,undefined]}function lea(a){var b=adder(pc,sext(a.substr(7,11))),c=a.substr(4,3),d=reg_ld(c),e=cc;return cc=c,reg_st(c,b),[undefined,undefined,c,d,e,undefined]}function trap_getc(a){return program==undefined?void(polling=!1):(0==polling&&(polling=!0,storage[0x3f28cb076060a]=undefined),storage[0x3f28cb076060a]==undefined?void setTimeout(function(){trap_getc()},1):(r0=storage[0x3f28cb076060a],polling=!1,void("play"==program&&exec())))}function trap_out(){return 13==binary_to_decimal(reg_ld("000"))||10==binary_to_decimal(reg_ld("000"))?(document.getElementById("terminal").innerHTML+="<br>",4):7==binary_to_decimal(reg_ld("000"))?(ping.play(),undefined):(document.getElementById("terminal").innerHTML+=String.fromCharCode(binary_to_decimal(reg_ld("000"))),1)}function trap_puts(){for(var a=r0,b=0;storage[a]!=undefined;){if("0000000000000000"==storage[a])return b;13==binary_to_decimal(storage[a])||10==binary_to_decimal(storage[a])?(document.getElementById("terminal").innerHTML+="<br>",b+=4):7==binary_to_decimal(reg_ld("000"))?ping.play():(document.getElementById("terminal").innerHTML+=String.fromCharCode(binary_to_decimal(storage[a])),b++),a=adder(a,"0000000000000001")}return b}function trap_in(a){return program==undefined?void(polling=!1):(0==polling&&(console.log("in"),document.getElementById("terminal").innerHTML+="Input a character> ",polling=!0,storage[0x3f28cb076060a]=undefined),storage[0x3f28cb076060a]==undefined?void setTimeout(function(){trap_in()},1):(r0=storage[0x3f28cb076060a],polling=!1,trap_out(),document.getElementById("terminal").innerHTML+="<br>",void("play"==program&&exec())))}function trap_putsp(){for(var a=r0,b=0;storage[a]!=undefined;){if("0000000000000000"==storage[a])return b;var c="0000000000000000";c=c.replaceAt(8,storage[a].substr(8,8)),console.log(c),13==binary_to_decimal(c)||10==binary_to_decimal(c)?(document.getElementById("terminal").innerHTML+="<br>",b+=4):7==binary_to_decimal(reg_ld("000"))?ping.play():(document.getElementById("terminal").innerHTML+=String.fromCharCode(binary_to_decimal(c)),b++),c=c.replaceAt(8,storage[a].substr(0,8)),console.log(c),"0000000000000000"==c||(13==binary_to_decimal(c)||10==binary_to_decimal(c)?(document.getElementById("terminal").innerHTML+="<br>",b+=4):7==binary_to_decimal(reg_ld("000"))?ping.play():(document.getElementById("terminal").innerHTML+=String.fromCharCode(binary_to_decimal(c)),b++)),a=adder(a,"0000000000000001")}return b}function trap_halt(){}function trap(a){a=a.substr(8,15);var b=undefined;return"00100000"==a&&(update(),trap_getc()),"00100001"==a&&(b=trap_out()),"00100010"==a&&(b=trap_puts()),"00100011"==a&&(update(),trap_in(),b=24),"00100100"==a&&trap_putsp(),"00100101"==a&&trap_halt(),[undefined,undefined,undefined,undefined,undefined,b]}function rti(a){return[undefined,undefined,undefined,undefined,undefined,undefined]}function undefined(a){return[undefined,undefined,undefined,undefined,undefined,undefined]}function play(a){program==undefined&&(program=a.id,document.getElementById("terminal").innerHTML="",$("#sidebar_help").hasClass("hide")?$("#sidebar_github").hasClass("hide")?$("#sidebar_styles").hasClass("hide")||$("#sidebar_styles").addClass("hide"):$("#sidebar_github").addClass("hide"):$("#sidebar_help").addClass("hide"),$("#sidebar_debugger").removeClass("hide"),$(dump_type).addClass("active"),is_assembly()?pass_one():store(),$("#hex").addClass("enabled"),$("#ascii").addClass("enabled"),$("#decimal").addClass("enabled"),
$("#binary").addClass("enabled"),$("#assembly").addClass("enabled"),$("#button_left").addClass("active"),$("#button_right").addClass("active"))}function stop(){program=undefined,reset(),$("#hex").removeClass("enabled"),$("#ascii").removeClass("enabled"),$("#decimal").removeClass("enabled"),$("#binary").removeClass("enabled"),$("#assembly").removeClass("enabled"),$("#button_left").removeClass("active"),$("#button_right").removeClass("active"),$(".selector").removeClass("active")}$(document).ready(function(){$("#dump_loc").prop("disabled",!0),$("textarea").keyup(function(a){var b=a.keyCode?a.keyCode:a.which;13==b&&(document.getElementById("terminal").innerHTML="",$("#sidebar_help").hasClass("hide")?$("#sidebar_github").hasClass("hide")?$("#sidebar_styles").hasClass("hide")||$("#sidebar_styles").addClass("hide"):$("#sidebar_github").addClass("hide"):$("#sidebar_help").addClass("hide"),$("#sidebar_debugger").removeClass("hide"),$(dump_type).addClass("active"),is_assembly()?pass_one():store(),$("#hex").addClass("enabled"),$("#ascii").addClass("enabled"),$("#decimal").addClass("enabled"),$("#binary").addClass("enabled"),$("#assembly").addClass("enabled"),$("#button_left").addClass("active"),$("#button_right").addClass("active"))}),$("body").keypress(function(a){var b=a.which;console.log(b+" - key code pressed"),storage[0x3f28cb076060a]=decimal_to_binary(b),storage[1111111e9]="1000000000000000",setTimeout(function(){storage[1111111e9]="0000000000000000"},8)}),$(".tab_add").click(function(){document.getElementById("tabs").innerHTML+='<div class="tab"><input class="tab_name" placeholder="file name" value="example.bin"></input></div>'}),$(".tab").click(function(){console.log("oh"),$(this).hasClass("tab_focus")||($(".tab").removeClass("tab_focus"),$(this).addClass("tab_focus"))}),$("#play").click(function(){$(this).hasClass("fa-play-circle")?(play(this),$(this).removeClass("fa-play-circle"),$(this).addClass("fa-stop-circle")):(stop(),$(this).removeClass("fa-stop-circle"),$(this).addClass("fa-play-circle"))}),$("#step").click(function(){$(this).hasClass("fa-arrow-circle-down")?(play(this),$(this).removeClass("fa-arrow-circle-down"),$(this).addClass("fa-stop-circle"),$("#stepper").removeClass("hide")):($(this).removeClass("fa-stop-circle"),$(this).addClass("fa-arrow-circle-down"),$("#stepper").addClass("hide"))}),$("#pulse-backward").click(function(){pulse_backward(0)}),$("#step-backward").click(function(){go_back()}),$("#step-forward").click(function(){step()}),$("#pulse-forward").click(function(){pulse_forward(0)}),$("#debugger").click(function(){$("#sidebar_help").hasClass("hide")?$("#sidebar_github").hasClass("hide")?$("#sidebar_styles").hasClass("hide")||$("#sidebar_styles").addClass("hide"):$("#sidebar_github").addClass("hide"):$("#sidebar_help").addClass("hide"),$("#sidebar_debugger").removeClass("hide")}),$("#github").click(function(){$("#sidebar_debugger").hasClass("hide")?$("#sidebar_help").hasClass("hide")?$("#sidebar_styles").hasClass("hide")||$("#sidebar_styles").addClass("hide"):$("#sidebar_help").addClass("hide"):$("#sidebar_debugger").addClass("hide"),$("#sidebar_github").removeClass("hide")}),$("#styles").click(function(){$("#sidebar_debugger").hasClass("hide")?$("#sidebar_github").hasClass("hide")?$("#sidebar_help").hasClass("hide")||$("#sidebar_help").addClass("hide"):$("#sidebar_github").addClass("hide"):$("#sidebar_debugger").addClass("hide"),$("#sidebar_styles").removeClass("hide")}),$("#help").click(function(){$("#sidebar_debugger").hasClass("hide")?$("#sidebar_github").hasClass("hide")?$("#sidebar_styles").hasClass("hide")||$("#sidebar_styles").addClass("hide"):$("#sidebar_github").addClass("hide"):$("#sidebar_debugger").addClass("hide"),$("#sidebar_help").removeClass("hide")}),$(".dump_table").hover(function(){if(dump_location!=undefined){var a;a=2==this.id.length?this.id.substr(1,1):this.id.substr(1,2),a=parseInt(a),this.innerHTML=binary_to_hex(adder(decimal_to_binary(a),dump_location)),$(this).css("color","#DDD"),$(this).css("font-weight","700"),$(this).css("font-size","12px")}}),$(".dump_table").mouseout(function(){dump_location!=undefined&&($(this).css("color","#6599FF"),$(this).css("font-weight","400"),$(this).css("font-size","4px"),update())}),$("#dump_loc").keyup(function(a){13==a.keyCode&&this.blur()}),$("#dump_loc").focusout(function(){4==document.getElementById("dump_loc").value.length?dump_location=hex_to_binary(document.getElementById("dump_loc").value):(document.getElementById("dump_loc").value=binary_to_hex(orig_dump_location),dump_location=orig_dump_location),update()}),$("#binary").click(function(){!$(this).hasClass("active")&&$(this).hasClass("enabled")&&$(".dump_table").css("font-size","4px")}),$(".selector").click(function(){if(!$(this).hasClass("active")&&$(this).hasClass("enabled"))switch($(".selector").removeClass("active"),$(this).addClass("active"),this.innerHTML){case"hex":dump_hex();break;case"ascii":dump_ascii();break;case"decimal":dump_decimal();break;case"binary":dump_binary();break;case"assembly":dump_assembly()}}),$(".style_square").click(function(){var a,b,c,d,e;$(this).hasClass("ss_one")?(a="#6599FF",b="#FAFAFA",c="white",d="#DDD",e="black"):$(this).hasClass("ss_two")?(a="#CF5230",b="#c6a090",c="#ffe9d2",d="#FAFAFA",e="#6c4c28"):$(this).hasClass("ss_three")&&(a="#778899",b="#2b3e50",c="#243443",d="#222",e="#DDD"),$("#header").css("background-color",a),$(".sidebar_button").css("border","1px solid "+a),$(".sidebar_button").css("color",a),$(".CodeMirror").css("background-color",c),$("#header").css("color",c),$("#sidebar_github").css("background-color",b),$("#sidebar_styles").css("background-color",b),$("#sidebar_debugger").css("background-color",b),$("#sidebar_help").css("background-color",b),$(".CodeMirror-gutters").css("background-color",b),$(".sidebar_button").css("background-color",b),$("#sidebar_github").css("border-left","1px solid "+d),$("#sidebar_styles").css("border-left","1px solid "+d),$("#sidebar_debugger").css("border-left","1px solid "+d),$("#sidebar_help").css("border-left","1px solid "+d),$(".CodeMirror-gutters").css("border-right","1px solid "+d),$(".CodeMirror-linenumber").css("color",d),$(".style_square").css("border","4px solid"+d),$(".CodeMirror").css("color",e),$("p").css("color",e)})});var ping=new Audio("media/boop.wav"),r0=r1=r2=r3=r4=r5=r6=r7="0000000000000000",pc,cc,oops=0,storage={};storage[1111111e9]="0000000000000000",storage[0x3f28cb076060a]=undefined,storage[0x3f28cb0760664]="0000000000000000",storage[0x3f28cb076066e]="0000000000000000",storage[0x3f28cb71571c6]="1000000000000000";var labels={},code={},dump_location,orig_dump_location,dump_type="#hex",thirteen=10,linked_list=null,program=undefined,polling=!1,ir_ui="0000000000000000";String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)};var editor=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:!0,mode:"text/html",matchBrackets:!0});editor.setSize("100%","100%");